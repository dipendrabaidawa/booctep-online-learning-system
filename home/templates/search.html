{% extends "base.html" %} {% block content %} {% load static %} {% load i18n %}

    <!-- HOEM SECTION -->
    <!-- USER LOGE OUT -->

    {% load l10n %}

    <style>
        @media only screen and (max-width: 600px) {
            .single_category {
                padding-left: 15px !important;
            }
        }

        /*.pagination li {
            width: 45px;
            height: 45px;
            border: 1px solid black;
            font-size: 30px;
            border-radius: 50%;
            margin-left: 5px;
        }*/

        .nocourseavailable {
            text-align: center;
            font-size: 30px;
            font-weight: bolder;
        }
    </style>

    <div class="single_category"
         style="background-image: url('{% static 'assets/img/categories/single_categories/no-found.svg' %}') !important">
        <div class="container">
            {% if searchstatus == 0 %}
                <h3>OPPS! there are no courses in “{{ searchkeyword }}”</h3>
                <p>If you don't find what you want, please be more specific..</p>
            {% else %}
                <h3>{{ totalsearchresult }} search results found for "{{ searchkeyword }}"</h3>
            {% endif %}
        </div>
    </div>

    <div class="products-navigation" style="display: none;">
    </div>

    <form id="seh_form" style="display: none;" method="post" action="">
        {% csrf_token %}
        <input type="hidden" id="type" name="type" value="{{ type }}">
        <input type="hidden" id="page" name="page" value="{{ page }}">
        <input type="hidden" id="order" name="order" value="{{ order }}">
    </form>

    <div id="shop-page" class="shop-wrapper">
        <div class="shop-header">
            <div class="container" style="display: flex; justify-content: space-between;">
                <div class="store-tabs">
                    <a data-tab="products-tab" class="tab-control {% if type == -1 %}is-active{% endif %}"
                       onclick="setType(-1)">{% trans 'All' %}</a>
                    <a data-tab="brands-tab" class="tab-control {% if type == 0 %}is-active{% endif %}"
                       onclick="setType(0)">{% trans 'Paid' %}</a>
                    <a data-tab="followers-tab" class="tab-control {% if type == 1 %}is-active{% endif %}"
                       onclick="setType(1)">{% trans 'Free' %}</a>
                    <div class="store-naver"></div>
                </div>

                <div class="combo-item">
                    <div class="select is-rounded">
                        <select class="combo-box" style="border-radius:3px;height:40px;margin-top:2px;"
                            id="category_id_2">
                            {% get_current_language as lang %}                            
                            {% if lang == "ar" %}
                                <option value="0" {% if order == 0 %}selected{% endif %}>الكل</option>
                                <option value="1" {% if order == 1 %}selected{% endif %}>الأعلى تقييم</option>
                                <option value="2" {% if order == 2 %}selected{% endif %}>الأكثر مشاركة</option>
                                <option value="3" {% if order == 3 %}selected{% endif %}>الأحدث</option>
                            {% else %}
                                <option value="0" {% if order == 0 %}selected{% endif %}>All</option>
                                <option value="1" {% if order == 1 %}selected{% endif %}>Most Rating</option>
                                <option value="2" {% if order == 2 %}selected{% endif %}>Most Students</option>
                                <option value="3" {% if order == 3 %}selected{% endif %}>Newest</option>
                            {% endif %}
                    </select>
                    </div>

                    <div class="select is-rounded">
                        <select class="combo-box selected-item is-focused"  style="border-radius:3px;height:40px;margin-top:2px;" id="category_id" onchange="category()">
                            {% get_current_language as lang %}
                            {% if lang == "ar" %}
                                <option value="0">الكل</option>
                                {% for i in category_obj %}
                                    <option value="{{ i.id }}">{{ i.namear }}</option>
                                {% endfor %}
                            {% else %}
                                <option value="0">All</option>
                                {% for i in category_obj %}
                                    <option value="{{ i.id }}">{{ i.name }}</option>
                                {% endfor %}
                            {% endif %}
                        </select>
                    </div>
                </div>
            </div>
        </div>
        <div class="store-sections">
            <div class="container">
                <!--Products-->
                <div id="products-tab" class="store-tab-pane is-active sortingdivparent" id="demo">
                    <div class="columns  is-multiline sortingdiv allcoursearea">
                        {% for course in course_list %}
                            <div class="column is-one-fifth-fullhd is-one-quarter-widescreen is-one-third-desktop is-half-tablet is-full-mobile coursecard"
                                 data-cat-id="{{ course.scat_id }}" data-rating="{{ course.rating }}"
                                 data-ts="{{ course.stuCnt }}" data-cd="{{ course.created_at.timestamp }}">
                                <div class="product-card  product-card-dark" data-name="{{ course.name }}"
                                     data-price="44.00" data-colors="true" data-variants="true"
                                     data-path="{% static 'assets/img/products/1' %}">
                                    <div class="image-grid-wrap">
                                        <div class="image-grid">
                                            <div class="image-row">
                                                <div class="flex-1 has-background-image show-image"
                                                     data-background="{% static course.cover_img %}"
                                                     data-demo-background="{% static 'assets/img/courses/pc.jpg' %}"
                                                     style="display: none;">
                                                    <a href="course/{{ course.link }}">
                                                        <div class="overlay"></div>
                                                    </a>
                                                    <div class="image-owner">
                                                        <div class="name">
                                                            {% if course.rating == 0.0 %}
                                                                <span class="fa fa-star"
                                                                      style="color: rgb(255, 255, 255);"></span>
                                                                <span class="fa fa-star"
                                                                      style="color: rgb(255, 255, 255);"></span>
                                                                <span class="fa fa-star"
                                                                      style="color: rgb(255, 255, 255);"></span>
                                                                <span class="fa fa-star"
                                                                      style="color: rgb(255, 255, 255);"></span>
                                                                <span class="fa fa-star"
                                                                      style="color: rgb(255, 255, 255);"></span>
                                                                {% if course.rating == 5.0 %}
                                                                    <span style="font-size: medium; color: rgb(255, 238, 80);font-weight: 700;margin-left: 5px;">5</span>
                                                                {% elif course.rating == 4.0 %}
                                                                    <span style="font-size: medium; color: rgb(255, 238, 80);font-weight: 700;margin-left: 5px;">4</span>
                                                                {% elif course.rating == 3.0 %}
                                                                    <span style="font-size: medium; color: rgb(255, 238, 80);font-weight: 700;margin-left: 5px;">3</span>
                                                                {% elif course.rating == 2.0 %}
                                                                    <span style="font-size: medium; color: rgb(255, 238, 80);font-weight: 700;margin-left: 5px;">2</span>
                                                                {% elif course.rating == 1.0 %}
                                                                    <span style="font-size: medium; color: rgb(255, 238, 80);font-weight: 700;margin-left: 5px;">1</span>
                                                                {% else %}
                                                                    <span style="font-size: medium; color: rgb(255, 238, 80);font-weight: 700;margin-left: 5px;">{{ course.rating|unlocalize }} <small
                                                                            style="color:white">( {{course.count}} )</small></span>
                                                                {% endif %}
                                                            {% elif course.rating <= 1.0 %}
                                                                <span class="fa fa-star"
                                                                      style="color: rgb(255, 238, 80);"></span>
                                                                <span class="fa fa-star"
                                                                      style="color: rgb(255, 255, 255);"></span>
                                                                <span class="fa fa-star"
                                                                      style="color: rgb(255, 255, 255);"></span>
                                                                <span class="fa fa-star"
                                                                      style="color: rgb(255, 255, 255);"></span>
                                                                <span class="fa fa-star"
                                                                      style="color: rgb(255, 255, 255);"></span>
                                                                {% if course.rating == 5.0 %}
                                                                    <span style="font-size: medium; color: rgb(255, 238, 80);font-weight: 700;margin-left: 5px;">5</span>
                                                                {% elif course.rating == 4.0 %}
                                                                    <span style="font-size: medium; color: rgb(255, 238, 80);font-weight: 700;margin-left: 5px;">4</span>
                                                                {% elif course.rating == 3.0 %}
                                                                    <span style="font-size: medium; color: rgb(255, 238, 80);font-weight: 700;margin-left: 5px;">3</span>
                                                                {% elif course.rating == 2.0 %}
                                                                    <span style="font-size: medium; color: rgb(255, 238, 80);font-weight: 700;margin-left: 5px;">2</span>
                                                                {% elif course.rating == 1.0 %}
                                                                    <span style="font-size: medium; color: rgb(255, 238, 80);font-weight: 700;margin-left: 5px;">1</span>
                                                                {% elif course.rating == 0.0 %}
                                                                    <span style="font-size: medium; color: rgb(255, 255, 255);font-weight: 700;margin-left: 5px;">0</span>
                                                                {% else %}
                                                                    <span style="font-size: medium; color:rgb(255, 238, 80);font-weight: 700;margin-left: 5px;">{{ course.rating|unlocalize }} <small
                                                                            style="color:white">( {{course.count}} )</small></span>
                                                                {% endif %}
                                                            {% elif course.rating <= 2.0 %}
                                                                <span class="fa fa-star"
                                                                      style="color: rgb(255, 238, 80);"></span>
                                                                <span class="fa fa-star"
                                                                      style="color: rgb(255, 238, 80);"></span>
                                                                <span class="fa fa-star"
                                                                      style="color: rgb(255, 255, 255);"></span>
                                                                <span class="fa fa-star"
                                                                      style="color: rgb(255, 255, 255);"></span>
                                                                <span class="fa fa-star"
                                                                      style="color: rgb(255, 255, 255);"></span>
                                                                {% if course.rating == 5.0 %}
                                                                    <span style="font-size: medium; color: rgb(255, 238, 80);font-weight: 700;margin-left: 5px;">5</span>
                                                                {% elif course.rating == 4.0 %}
                                                                    <span style="font-size: medium; color: rgb(255, 238, 80);font-weight: 700;margin-left: 5px;">4</span>
                                                                {% elif course.rating == 3.0 %}
                                                                    <span style="font-size: medium; color: rgb(255, 238, 80);font-weight: 700;margin-left: 5px;">3</span>
                                                                {% elif course.rating == 2.0 %}
                                                                    <span style="font-size: medium; color: rgb(255, 238, 80);font-weight: 700;margin-left: 5px;">2</span>
                                                                {% elif course.rating == 1.0 %}
                                                                    <span style="font-size: medium; color: rgb(255, 238, 80);font-weight: 700;margin-left: 5px;">1</span>
                                                                {% else %}
                                                                    <span style="font-size: medium; color: rgb(255, 238, 80);font-weight: 700;margin-left: 5px;">{{ course.rating|unlocalize }} <small
                                                                            style="color:white">( {{course.count}} )</small></span>
                                                                {% endif %}
                                                            {% elif course.rating <= 3.0 %}
                                                                <span class="fa fa-star"
                                                                      style="color: rgb(255, 238, 80);"></span>
                                                                <span class="fa fa-star"
                                                                      style="color: rgb(255, 238, 80);"></span>
                                                                <span class="fa fa-star"
                                                                      style="color: rgb(255, 238, 80);"></span>
                                                                <span class="fa fa-star"
                                                                      style="color: rgb(255, 255, 255);"></span>
                                                                <span class="fa fa-star"
                                                                      style="color: rgb(255, 255, 255);"></span>
                                                                {% if course.rating == 5.0 %}
                                                                    <span style="font-size: medium; color: rgb(255, 238, 80);font-weight: 700;margin-left: 5px;">5</span>
                                                                {% elif course.rating == 4.0 %}
                                                                    <span style="font-size: medium; color: rgb(255, 238, 80);font-weight: 700;margin-left: 5px;">4</span>
                                                                {% elif course.rating == 3.0 %}
                                                                    <span style="font-size: medium; color: rgb(255, 238, 80);font-weight: 700;margin-left: 5px;">3</span>
                                                                {% elif course.rating == 2.0 %}
                                                                    <span style="font-size: medium; color: rgb(255, 238, 80);font-weight: 700;margin-left: 5px;">2</span>
                                                                {% elif course.rating == 1.0 %}
                                                                    <span style="font-size: medium; color: rgb(255, 238, 80);font-weight: 700;margin-left: 5px;">1</span>
                                                                {% else %}
                                                                    <span style="font-size: medium; color: rgb(255, 238, 80);font-weight: 700;margin-left: 5px;">{{ course.rating|unlocalize }} <small
                                                                            style="color:white">( {{course.count}} )</small></span>
                                                                {% endif %}
                                                            {% elif course.rating <= 4.0 %}
                                                                <div class="in-blk">
                                                                    <div class="goldstardiv">
                                                                        <span class="fa fa-star"></span>
                                                                        <span class="fa fa-star"></span>
                                                                        <span class="fa fa-star"></span>
                                                                    </div>
                                                                    <div class="goldstardiv">
                                                                        <span class="fa fa-star" style="margin-left:3px !important"></span>
                                                                        <div class="halfstar">
                                                                            <span class="fa fa-star"></span>
                                                                        </div>
                                                                    </div>
                                                                    <div class="goldstardiv goldstardiv2">
                                                                        <span class="fa fa-star"
                                                                              style="color:white"></span>
                                                                    </div>

                                                                {% if course.rating == 5.0 %}
                                                                    <span style="font-size: medium; color: rgb(255, 238, 80);font-weight: 700;margin-left: 5px;">5</span>
                                                                    {% elif course.rating == 4.0 %}
                                                                        <span style="font-size: medium; color: rgb(255, 238, 80);font-weight: 700;margin-left: 5px;">4</span>
                                                                    {% elif course.rating == 3.0 %}
                                                                        <span style="font-size: medium; color: rgb(255, 238, 80);font-weight: 700;margin-left: 5px;">3</span>
                                                                    {% elif course.rating == 2.0 %}
                                                                        <span style="font-size: medium; color: rgb(255, 238, 80);font-weight: 700;margin-left: 5px;">2</span>
                                                                    {% elif course.rating == 1.0 %}
                                                                        <span style="font-size: medium; color: rgb(255, 238, 80);font-weight: 700;margin-left: 5px;">1</span>
                                                                    {% else %}
                                                                        <span style="font-size: medium; color: rgb(255, 238, 80);font-weight: 700;margin-left: 5px;">{{ course.rating|unlocalize }} <small
                                                                                style="color:white">( {{course.count}} )</small></span>
                                                                    {% endif %}
                                                                </div>


                                                            {% else %}

                                                                <span class="fa fa-star"
                                                                      style="color: rgb(255, 238, 80);"></span>
                                                                <span class="fa fa-star"
                                                                      style="color: rgb(255, 238, 80);"></span>
                                                                <span class="fa fa-star"
                                                                      style="color: rgb(255, 238, 80);"></span>
                                                                <span class="fa fa-star"
                                                                      style="color: rgb(255, 238, 80);"></span>
                                                                <span class="fa fa-star"
                                                                      style="color: rgb(255, 238, 80);"></span>
                                                                {% if course.rating == 5.0 %}
                                                                    <span style="font-size: medium; color: rgb(255, 238, 80);font-weight: 700;margin-left: 5px;">5</span>
                                                                {% elif course.rating == 4.0 %}
                                                                    <span style="font-size: medium; color: rgb(255, 238, 80);font-weight: 700;margin-left: 5px;">4</span>
                                                                {% elif course.rating == 3.0 %}
                                                                    <span style="font-size: medium; color: rgb(255, 238, 80);font-weight: 700;margin-left: 5px;">3</span>
                                                                {% elif course.rating == 2.0 %}
                                                                    <span style="font-size: medium; color: rgb(255, 238, 80);font-weight: 700;margin-left: 5px;">2</span>
                                                                {% elif course.rating == 1.0 %}
                                                                    <span style="font-size: medium; color: rgb(255, 238, 80);font-weight: 700;margin-left: 5px;">1</span>
                                                                {% else %}
                                                                    <span style="font-size: medium; color: rgb(255, 238, 80);font-weight: 700;margin-left: 5px;">{{ course.rating|unlocalize }} <small
                                                                            style="color:white">( {{course.count}} )</small></span>
                                                                {% endif %}
                                                            {% endif %}
                                                        </div>
                                                    </div>

                                                    {% if course.price > 0 %}
                                                        {% if course.id in alreadyinFav %}
                                                            <div class="photo-like pop-button has-tooltip is-shifted is-active favbutton"
                                                                 id="invite-pop" data-id="{{ course.id }}">

                                                                <a href="# " class="inner "
                                                                   data-title="Relationship"
                                                                   data-type="addFav" data-id="">
                                                                    <svg xmlns="http://www.w3.org/2000/svg"
                                                                         xmlns:xlink="http://www.w3.org/1999/xlink"
                                                                         aria-hidden="true" focusable="false"
                                                                         width="1em"
                                                                         height="1em"
                                                                         style="-ms-transform: rotate(360deg); -webkit-transform: rotate(360deg); transform: rotate(360deg);"
                                                                         preserveAspectRatio="xMidYMid meet"
                                                                         viewBox="0 0 24 24">
                                                                        <g fill="red" stroke="red"
                                                                           stroke-width="2"
                                                                           stroke-linecap="round"
                                                                           stroke-linejoin="round">
                                                                            <path d="M20.84 4.61a5.5 5.5 0 0 0-7.78 0L12 5.67l-1.06-1.06a5.5 5.5 0 0 0-7.78 7.78l1.06 1.06L12 21.23l7.78-7.78l1.06-1.06a5.5 5.5 0 0 0 0-7.78z"/>
                                                                        </g>
                                                                    </svg>
                                                                </a>
                                                            </div>

                                                        {% else %}

                                                            <div class="photo-like pop-button has-tooltip favbutton"
                                                                 id="invite-pop" data-id="{{ course.id }}">

                                                                <a href="# " class="inner "
                                                                   data-title="Relationship"
                                                                   data-type="addFav" data-id="">
                                                                    <svg xmlns="http://www.w3.org/2000/svg"
                                                                         xmlns:xlink="http://www.w3.org/1999/xlink"
                                                                         aria-hidden="true" focusable="false"
                                                                         width="1em"
                                                                         height="1em"
                                                                         style="-ms-transform: rotate(360deg); -webkit-transform: rotate(360deg); transform: rotate(360deg);"
                                                                         preserveAspectRatio="xMidYMid meet"
                                                                         viewBox="0 0 24 24">
                                                                        <g fill="none" stroke="#626262"
                                                                           stroke-width="2"
                                                                           stroke-linecap="round"
                                                                           stroke-linejoin="round">
                                                                            <path d="M20.84 4.61a5.5 5.5 0 0 0-7.78 0L12 5.67l-1.06-1.06a5.5 5.5 0 0 0-7.78 7.78l1.06 1.06L12 21.23l7.78-7.78l1.06-1.06a5.5 5.5 0 0 0 0-7.78z"/>
                                                                        </g>
                                                                    </svg>
                                                                </a>
                                                            </div>
                                                        {% endif %}
                                                        {% if course.id in alreadyinCart %}
                                                            <a id="follow-pop"
                                                               class="photo-time pop-button has-tooltip is-shifted is-active"
                                                               data-title="Relationship"
                                                               data-id="{{ course.id }}">
                                                                <i class="fa fa-shopping-cart"
                                                                   style="font-size: 22px;color: blue;"></i>
                                                            </a>
                                                        {% else %}
                                                            <a id="follow-pop"
                                                               class="photo-time pop-button has-tooltip"
                                                               data-title="Relationship"
                                                               data-id="{{ course.id }}">
                                                                <i class="fa fa-shopping-cart"
                                                                   style="font-size: 22px;color: #fff;"></i>
                                                            </a>
                                                        {% endif %}
                                                    {% else %}
                                                        <div class="photo-like pop-button has-tooltip favbutton"
                                                             style="left:10px !important"
                                                             data-title="Relationship"
                                                             id="invite-pop" data-type="addFav"
                                                             onclick="addFav({{ course.id }})">
                                                            <a href="# " class="inner ">
                                                                <svg xmlns="http://www.w3.org/2000/svg"
                                                                     xmlns:xlink="http://www.w3.org/1999/xlink"
                                                                     aria-hidden="true" focusable="false"
                                                                     width="1em"
                                                                     height="1em"
                                                                     style="-ms-transform: rotate(360deg); -webkit-transform: rotate(360deg); transform: rotate(360deg);"
                                                                     preserveAspectRatio="xMidYMid meet"
                                                                     viewBox="0 0 24 24">
                                                                    <g fill="none" stroke="#626262"
                                                                       stroke-width="2"
                                                                       stroke-linecap="round"
                                                                       stroke-linejoin="round">
                                                                        <path d="M20.84 4.61a5.5 5.5 0 0 0-7.78 0L12 5.67l-1.06-1.06a5.5 5.5 0 0 0-7.78 7.78l1.06 1.06L12 21.23l7.78-7.78l1.06-1.06a5.5 5.5 0 0 0 0-7.78z"/>
                                                                    </g>
                                                                </svg>
                                                            </a>
                                                        </div>

                                                    {% endif %}
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="product-skeleton">
                                        <div class="pd_title loading"></div>
                                        <div class="pd_description">
                                            <div class="pd_description1 loading"></div>
                                            <div class="pd_description2 loading"></div>
                                        </div>
                                        <div class="pd_review" style="display: flex;">
                                            <div class="pd_users loading"></div>
                                            <div class="pd_videos loading"></div>
                                        </div>
                                        <div class="pd_footer" style="display: flex;">
                                            <div class="pd_price loading"></div>
                                            <div class="pd_button loading"></div>
                                        </div>
                                    </div>
                                    <!-- <div class="product-info" style="display: none;"> -->
                                    <div class="product-info">
                                        <h3>
                                            <a href="# "
                                               style="display: block; width: 230px; overflow: hidden; white-space: nowrap; text-overflow: ellipsis; ">{{ course.name }}</a>
                                        </h3>
                                        <p style="line-height: 1.5em; height: 3em; overflow: hidden; text-overflow: ellipsis;">{{ course.description }}</p>

                                        <i class="fa fa-users "></i>
                                        <span style="font-size: small; ">{{ course.stuCnt }}</span>
                                        <i class="fa fa-video "></i>
                                        <span style="font-size: small; ">{{ course.video }} Videos</span>
                                        <div class="product-actions ">
                                            <div class="left">
                                                {% if course.price > 0 %}
                                                    {% if course.price != course.discount_price %}
                                                      {% get_current_language as lang %}
                                                      {% if lang == "ar" %}
                                                        <b class="prcg prcg-dark">
                                                            <del style="font-weight: bold" class="prcg prcg-dark"> {{ course.price|floatformat:'2'|unlocalize }} <b>ريال</b> </del><br>   
                                                            <b class="prcgr prcgr-dark"> {{ course.discount_price|floatformat:'2'|unlocalize }} ريال </b>
                                                        </b>
                                                      {% else %}
                                                      <b class="prcg prcg-dark">
                                                          <del style="font-weight: bold" class="prcg prcg-dark">SR {{ course.price|floatformat:'2' }}</del> <br>  
                                                          <b class="prcgr prcgr-dark">SR {{ course.discount_price|floatformat:'2' }}</b>
                                                      </b>
                                                      {% endif %}
                                                    {% else %}
                                                    {% get_current_language as lang %}
                                                    {% if lang == "ar" %}
                                                    <b class="prcg prcg-dark"> {{ course.price|unlocalize }} ريال</b>
                                                    {% else %}
                                                    <b class="prcg prcg-dark">SR {{ course.price }}</b>
                                                    {% endif %}

                                                    {% endif %}
                                                {% else %}
                                                   {% get_current_language as lang %}
                                                   {% if lang == "ar" %}
                                                    <b class="prcgr prcgr-dark"> مجانا </b>
                                                   {% else %}
                                                   <b class="prcgr prcgr-dark"> Free </b>
                                                   {% endif %}
                                                {% endif %}
                                            </div>

                                            <div class="right ">
                                                <a class="button primary-button is-solid raised story modal-trigger promo"
                                                   data-modal="videos-modal" onclick="showVideoModal(this)"
                                                   data-id="{{ course.id }}">
                                                    <i class="fa fa-play"></i> {% trans 'Demo' %}
                                                </a>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        {% endfor %}
                    </div>

                    <center>
                        {% if course_list.has_other_pages %}
                            <ul class="pagination">
                                {% if course_list.has_previous %}
                                    <li><a onclick="page_prev()">
                                        <i class="fa fa-angle-left" aria-hidden="true"></i>
                                    </a></li>
                                {% else %}
                                    <li class="disabled">
                                        <i class="fa fa-angle-left" aria-hidden="true"></i></li>
                                {% endif %}
                                {% for i in course_list.paginator.page_range %}
                                    {% if course_list.number == i %}
                                        <li class="active" style="background: #0d79df; color: white; cursor: pointer;"
                                            onclick="page_set({{ i }})"><span>{{ i }}</span>
                                        </li>
                                    {% else %}
                                        <li><a onclick="page_set({{ i }})">{{ i }}</a></li>
                                    {% endif %}
                                {% endfor %}
                                {% if course_list.has_next %}
                                    <li><a onclick="page_next()">
                                        <i class="fa fa-angle-right" aria-hidden="true"></i>
                                    </a></li>
                                {% else %}
                                    <li class="disabled">
                                        <i class="fa fa-angle-right" aria-hidden="true"></i>
                                    </li>
                                {% endif %}
                            </ul>
                        {% endif %}
                    </center>
                </div>
            </div>
        </div>
    </div>
    <!-- Filters and courses -->

    <!-- Course Detail -->
    <div id="videos-modal" class="modal videos-modal is-large has-light-bg">
        <div class="modal-background"></div>
        <div class="modal-content" style="height: auto !important;">
            <div class="card">
                <div class="card-heading">
                    <div class="user-meta">
                        <img id="modal-img" src="/static/assets/img/man.jpg">
                    </div>
                    <span class="user-meta-span"
                          id="modal-user-name ml-3">{{ course.user.first_name }}{{ course.user.last_name }} </span>
                    <span class="user-meta-span"
                          id="modal-course-name">&nbsp; &nbsp; |   {{ course.name }}&nbsp; &nbsp;</span>
                         

                    <!-- Close X button -->
                    <div class="close-wrap" >
                        <span class="close-modal" style="background-color: #e9e9e9 !important;">
                            <i data-feather="x" style="color: #c7c7c7 !important;"></i>
                        </span>
                    </div>
                </div>
                <div class="card-body">
                    <div class="video-promo"><!--heree-->
                        <video autoplay poster="/static/assets/img/setting.png" class="video-promo" style=""
                               id="videoplayer"
                               playsinline controls> <!-- Point play promo video -->
                            <source id="modal-video-src" src="{{ course.video.promo }}" type="video/mp4"/>

                            <!-- Captions are optional -->
                            <track kind="captions" label="English captions" src="/path/to/captions.vtt" srclang="en"
                                   default/>
                        </video>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script>

        var myTimer = setInterval(Dataloading, 2000);
        let host_url = "{{host_url}}"

        $(document).ready(function () {

        });

        function Dataloading() {

            $(".skeleton").hide();
            $(".show-image ").delay(200).fadeIn(650);

            $(".product-skeleton").hide();
            $(".product-info ").delay(200).fadeIn(650);
        }

        function showVideoModal(obj) {
            id = $(obj).data('id')
            video_url = $(obj).data('url')
            let url = `/get_course_detail_by_id/`
            let form_data = new FormData()
            form_data.append('id', id)
            $.ajax({
                url: url,
                type: 'POST',
                dataType: 'json',
                async: false,
                contentType: false,
                processData: false,
                data: form_data,
            }).then((response) => {
                $("#modal-user-name").html(response.user_name)
                course = JSON.parse(response.course)
                sections = JSON.parse(response.sections)
                {% comment %} console.log("test::", course)
                console.log("sections::", sections) {% endcomment %}
                $("#modal-course-name").html(course[0].fields.name)
                $("#modal-users").html(response.user_count)
                $("#modal-rating").html(response.rating)
                $("#modal-img").attr('src', '/static' + response.user_img)
                html = ``;
                key = 0
                eleKey = 0
                sections.forEach(item =>{
                    html += `<div class="accordion__item">
                                <a href="#" class="accordion__toggle collapsed" style="display:flex; justify-content: space-between;" data-toggle="collapse"
                                   data-target="#course-toc-${key}" data-parent="#parent">
                                    <span class="flex">${item.name}</span>
                                    <span class="accordion__toggle-icon material-icons">keyboard_arrow_down</span>
                                </a>`
                        item.video_list.forEach(ele =>{
                            if (eleKey == 0 && ele.lock == 0) {
                                $("#modal-video-src").attr('src', "http://" + host_url + "/static" + ele.url)
                                $("#modal-video-src").parent()[0].load()
                            }
                            videoname = ele.name.slice(0, -4)
                            icon_name = `fa fa-lock`
                            if (ele.lock == 0)
                                icon_name = `fa fa-video`
                            if (ele.lock == 0 && eleKey == 0) {
                                icon_name = `fa fa-play`
                                eleKey ++
                            }
                            html += `<div class="accordion__menu collapse" id="course-toc-${key}">
                                        <div class="accordion__menu-link" style="cursor: pointer;">
                                            <i class="${icon_name}" style="margin-right: 5px;color: rgb(194, 194, 194);"></i> &nbsp
                                            <div data-url="${ele.url}"`
                            if (ele.lock == 0)
                                 html +=  `onclick="playmyvideo(this)"`
                             html += `>${videoname}</div>
                                        </div>
                                    </div>`
                        })
                    html += `</div>`
                    key ++
                })
                $("#modal-parent").html(html)
            })
        }

        function setType(type) {
            $("#type").val(type)
            $("#seh_form").submit()
        }

        let cur_page = '{{ page }}'

        function page_set(page) {
            $("#page").val(page)
            $("#seh_form").submit()
        }

        function page_prev() {
            page = cur_page * 1 - 1
            $("#page").val(page)
            $("#seh_form").submit()
        }

        function page_next() {
            page = cur_page * 1 + 1
            $("#page").val(page)
            $("#seh_form").submit()
        }

        $("#category_id_2").on('change', function(){
            $("#order").val($(this).val())
            $("#seh_form").submit()
        })

        function category() {

            var category_id = $("#category_id").val();
            var category_id_2 = $("#category_id_2").val();

            $('#loadings').show();

            if (!category_id) {
                category_id = 0
            }

            if (!category_id_2) {
                category_id_2 = 0
            }


            if (category_id_2 == 1) { // Most rated

                $('.paidcoursearea .coursecard').sort(function (a, b) {
                    return $(b).data('rating') - $(a).data('rating');
                }).appendTo('.paidcoursearea');

                $('.freecoursearea .coursecard').sort(function (a, b) {
                    return $(b).data('rating') - $(a).data('rating');
                }).appendTo('.freecoursearea');

                $('.allcoursearea .coursecard').sort(function (a, b) {
                    return $(b).data('rating') - $(a).data('rating');
                }).appendTo('.allcoursearea');


            }


            if (category_id_2 == 2) {  // Most students

                $('.paidcoursearea .coursecard').sort(function (a, b) {
                    return $(b).data('ts') - $(a).data('ts');
                }).appendTo('.paidcoursearea');

                $('.freecoursearea .coursecard').sort(function (a, b) {
                    return $(b).data('ts') - $(a).data('ts');
                }).appendTo('.freecoursearea');

                $('.allcoursearea .coursecard').sort(function (a, b) {
                    return $(b).data('ts') - $(a).data('ts');
                }).appendTo('.allcoursearea');


            }


            if (category_id_2 == 3) {  // Newest

                $('.paidcoursearea .coursecard').sort(function (a, b) {
                    return $(b).data('cd') - $(a).data('cd');
                }).appendTo('.paidcoursearea');

                $('.freecoursearea .coursecard').sort(function (a, b) {
                    return $(b).data('cd') - $(a).data('cd');
                }).appendTo('.freecoursearea');

                $('.allcoursearea .coursecard').sort(function (a, b) {
                    return $(b).data('cd') - $(a).data('cd');
                }).appendTo('.allcoursearea');


            }


            if (category_id == 0) {

                $(".coursecard").show();

            } else {
                $(".coursecard").hide();
                $(".coursecard[data-cat-id=" + category_id + "]").show();
                $('#loadings').hide();

                if ($(".coursecard[data-cat-id=" + category_id + "]").length == 0) {

                    swal({
                        title: "Sorry, there are no course in this category ",
                        icon: "warning",
                        button: "Ok",
                        closeOnClickOutside: false,
                    })

                }

            }


        }
    </script>

{% endblock %}